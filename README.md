# æ–°å¹²çº¿é—ªä¿®å¹³å°

ä¸€ä¸ªç°ä»£åŒ–çš„è®¾å¤‡ç»´ä¿®æœåŠ¡å¹³å°ï¼Œä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„ç»´ä¿®é¢„çº¦å’Œç®¡ç†æœåŠ¡ã€‚

## é¡¹ç›®æ¦‚è¿°

æ–°å¹²çº¿é—ªä¿®å¹³å°æ˜¯ä¸€ä¸ªå…¨æ ˆWebåº”ç”¨ï¼Œæ—¨åœ¨è¿æ¥éœ€è¦è®¾å¤‡ç»´ä¿®çš„ç”¨æˆ·å’Œä¸“ä¸šçš„ç»´ä¿®æŠ€å¸ˆã€‚å¹³å°æä¾›äº†å®Œæ•´çš„ç»´ä¿®æœåŠ¡æµç¨‹ï¼Œä»é¢„çº¦ä¸‹å•åˆ°ç»´ä¿®å®Œæˆçš„å…¨ç¨‹è·Ÿè¸ªã€‚

### ä¸»è¦åŠŸèƒ½

#### ç”¨æˆ·ç«¯
- ğŸ” ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- ğŸ“± è®¾å¤‡ç»´ä¿®é¢„çº¦ï¼ˆæ‰‹æœºã€ç”µè„‘ç­‰ï¼‰
- ğŸ“‹ è®¢å•çŠ¶æ€è·Ÿè¸ª
- ğŸ’° åœ¨çº¿æ”¯ä»˜
- â­ æœåŠ¡è¯„ä»·
- ğŸ‘¤ ä¸ªäººä¿¡æ¯ç®¡ç†
- ğŸ  é¦–é¡µå±•ç¤ºå’ŒæœåŠ¡æµè§ˆ

#### æŠ€å¸ˆç«¯
- ğŸ”§ æ¥å•ç®¡ç†
- ğŸ“Š å·¥ä½œå°é¢æ¿
- ğŸ“ ç»´ä¿®è¿›åº¦æ›´æ–°
- ğŸ’¼ æ”¶å…¥ç»Ÿè®¡
- ğŸ“± ç§»åŠ¨ç«¯é€‚é…

#### ç®¡ç†ç«¯
- ğŸ‘¥ ç”¨æˆ·ç®¡ç†ï¼ˆç”¨æˆ·ã€æŠ€å¸ˆã€ç®¡ç†å‘˜ã€è´¢åŠ¡ï¼‰
- ğŸ› ï¸ æœåŠ¡é¡¹ç›®ç®¡ç†
- ğŸ“ˆ è®¢å•ç®¡ç†å’Œåˆ†é…
- ğŸ’¹ è´¢åŠ¡ç®¡ç†å’Œæ”¯ä»˜å¤„ç†
- ğŸ“Š æ•°æ®ç»Ÿè®¡å’ŒæŠ¥è¡¨
- ğŸ” æƒé™ç®¡ç†

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢æ¡†æ¶ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **TypeScript 5.x** - ç±»å‹å®‰å…¨çš„JavaScriptè¶…é›†
- **Ant Design 5.x** - ä¼ä¸šçº§UIè®¾è®¡è¯­è¨€å’Œç»„ä»¶åº“
- **React Router DOM 6.x** - å•é¡µåº”ç”¨è·¯ç”±ç®¡ç†
- **Zustand 4.x** - è½»é‡çº§çŠ¶æ€ç®¡ç†åº“
- **Axios 1.x** - åŸºäºPromiseçš„HTTPå®¢æˆ·ç«¯
- **Tailwind CSS 3.x** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Vite 5.x** - å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·

### åç«¯
- **Node.js 18+** - JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js 4.x** - æˆç†Ÿç¨³å®šçš„Webåº”ç”¨æ¡†æ¶
- **TypeScript 5.x** - æœåŠ¡ç«¯ç±»å‹å®‰å…¨å¼€å‘
- **Supabase 2.x** - å¼€æºçš„Firebaseæ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›æ•°æ®åº“ã€è®¤è¯ã€å­˜å‚¨æœåŠ¡
- **PostgreSQL** - ä¼ä¸šçº§å…³ç³»å‹æ•°æ®åº“ï¼ˆé€šè¿‡Supabaseæ‰˜ç®¡ï¼‰
- **JWT (jsonwebtoken)** - æ— çŠ¶æ€èº«ä»½éªŒè¯
- **bcryptjs** - å¯†ç å“ˆå¸ŒåŠ å¯†
- **CORS** - è·¨åŸŸèµ„æºå…±äº«ä¸­é—´ä»¶
- **Helmet** - Expresså®‰å…¨ä¸­é—´ä»¶
- **Morgan** - HTTPè¯·æ±‚æ—¥å¿—è®°å½•
- **Multer** - å¤šéƒ¨åˆ†è¡¨å•æ•°æ®å’Œæ–‡ä»¶ä¸Šä¼ å¤„ç†

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **TSX** - TypeScriptæ‰§è¡Œå™¨
- **Git** - ç‰ˆæœ¬æ§åˆ¶

## é¡¹ç›®ç»“æ„

```
XGX_Flash_Fix/
â”œâ”€â”€ frontend/                 # å‰ç«¯Reactåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/         # é€šç”¨UIç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ business/       # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”‚   â””â”€â”€ PublicRoute.tsx
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx         # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.tsx        # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.tsx     # æ³¨å†Œé¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.tsx      # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrder.tsx  # åˆ›å»ºè®¢å•
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderList.tsx    # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderDetail.tsx  # è®¢å•è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ RepairRequest.tsx # æŠ¥ä¿®è¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ technician/      # æŠ€å¸ˆç«¯é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ admin/           # ç®¡ç†ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ store/          # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ authStore.ts     # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ orderStore.ts    # è®¢å•çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ userStore.ts     # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.ts         # HTTPå®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts     # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ helpers.ts       # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ types/          # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ hooks/          # è‡ªå®šä¹‰React Hook
â”‚   â”‚   â””â”€â”€ styles/         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts      # Viteé…ç½®
â”‚   â””â”€â”€ tailwind.config.js  # Tailwindé…ç½®
â”œâ”€â”€ backend/                 # åç«¯Expressåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.ts    # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ orderController.ts   # è®¢å•æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ serviceController.ts # æœåŠ¡æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ userController.ts    # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ paymentController.ts # æ”¯ä»˜æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ orders.ts       # è®¢å•è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ services.ts     # æœåŠ¡è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts        # ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ payments.ts     # æ”¯ä»˜è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.ts   # æ•°æ®éªŒè¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ rateLimit.ts    # é™æµä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ errorHandler.ts # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.ts   # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ orderService.ts  # è®¢å•æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ userService.ts   # ç”¨æˆ·æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ notificationService.ts # é€šçŸ¥æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts     # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.ts          # JWTå·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ response.ts     # å“åº”æ ¼å¼åŒ–
â”‚   â”‚   â”‚   â””â”€â”€ validation.ts   # æ•°æ®éªŒè¯
â”‚   â”‚   â”œâ”€â”€ types/          # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json       # TypeScripté…ç½®
â”œâ”€â”€ .trae/                  # é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ documents/          # ç”Ÿæˆçš„æ–‡æ¡£
â”‚       â”œâ”€â”€ äº§å“éœ€æ±‚æ–‡æ¡£.md
â”‚       â”œâ”€â”€ æŠ€æœ¯æ¶æ„æ–‡æ¡£.md
â”‚       â”œâ”€â”€ å¼€å‘æŒ‡å—.md
â”‚       â””â”€â”€ å¼€å‘æ–‡æ¡£.md
â”œâ”€â”€ supabase/               # Supabaseé…ç½®
â”‚   â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ config.toml         # Supabaseé…ç½®
â”œâ”€â”€ docker-compose.yml      # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ package.json           # æ ¹ç›®å½•ä¾èµ–
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0
- Git
- Supabaseè´¦å·ï¼ˆç”¨äºæ•°æ®åº“å’Œè®¤è¯æœåŠ¡ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/your-username/XGX_Flash_Fix.git
   cd XGX_Flash_Fix
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # å®‰è£…æ ¹ç›®å½•ä¾èµ–
   npm install
   
   # å®‰è£…å‰ç«¯ä¾èµ–
   cd frontend
   npm install
   
   # å®‰è£…åç«¯ä¾èµ–
   cd ../backend
   npm install
   ```

3. **Supabaseé…ç½®**
   
   - åœ¨ [Supabase](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
   - è·å–é¡¹ç›®URLå’ŒAPIå¯†é’¥
   - è¿è¡Œæ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼ˆåœ¨Supabase SQLç¼–è¾‘å™¨ä¸­æ‰§è¡Œ `supabase/migrations/` ä¸‹çš„SQLæ–‡ä»¶ï¼‰

4. **ç¯å¢ƒé…ç½®**
   
   åœ¨ `backend` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š
   ```env
   # æ•°æ®åº“é…ç½®
   SUPABASE_URL=your_supabase_project_url
   SUPABASE_ANON_KEY=your_supabase_anon_key
   SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
   
   # JWTé…ç½®
   JWT_SECRET=your_jwt_secret_key
   
   # æœåŠ¡å™¨é…ç½®
   PORT=3001
   NODE_ENV=development
   
   # CORSé…ç½®
   FRONTEND_URL=http://localhost:5173
   ```

5. **å¯åŠ¨æœåŠ¡**
   ```bash
   # å¯åŠ¨åç«¯æœåŠ¡
   cd backend
   npm run dev
   
   # å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯ï¼‰
   cd frontend
   npm run dev
   ```

6. **è®¿é—®åº”ç”¨**
   - å‰ç«¯åº”ç”¨ï¼šhttp://localhost:5173
   - åç«¯APIï¼šhttp://localhost:3001

### é»˜è®¤è´¦å·

ç³»ç»Ÿé¢„ç½®äº†ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š
- **ç®¡ç†å‘˜è´¦å·**ï¼šemail: `admin@xgx.com`, password: `admin123`
- **è´¢åŠ¡äººå‘˜è´¦å·**ï¼šemail: `finance@xgx.com`, password: `finance123`
- **æ™®é€šç”¨æˆ·è´¦å·**ï¼šå¯é€šè¿‡æ³¨å†Œé¡µé¢è‡ªè¡Œåˆ›å»º

> æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶è¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç ä»¥ç¡®ä¿å®‰å…¨æ€§ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# æ„å»ºåç«¯
cd backend
npm run build
```

## APIæ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- åŸºç¡€URL: `http://localhost:3001/api`
- è®¤è¯æ–¹å¼: Bearer Token (JWT)
- å“åº”æ ¼å¼: JSON

### è®¤è¯ç›¸å…³

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "name": "ç”¨æˆ·å",
  "email": "ç”¨æˆ·é‚®ç®±",
  "phone": "æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰",
  "password": "å¯†ç ",
  "role": "user" // user, technician, admin, finance
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "name": "ç”¨æˆ·å",
      "email": "user@example.com",
      "role": "user"
    },
    "token": "jwt_token_here"
  }
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "ç”¨æˆ·é‚®ç®±",
  "password": "å¯†ç "
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "name": "ç”¨æˆ·å",
      "email": "user@example.com",
      "role": "user"
    },
    "token": "jwt_token_here"
  }
}
```

#### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```http
GET /api/auth/me
Authorization: Bearer <token>
```

### ç”¨æˆ·ç®¡ç†

#### è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
```http
GET /api/users
Authorization: Bearer <token>
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```http
PUT /api/users/:id
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ç”¨æˆ·å",
  "email": "é‚®ç®±",
  "role": "ç”¨æˆ·è§’è‰²"
}
```

### æœåŠ¡ç®¡ç†

#### è·å–æœåŠ¡åˆ—è¡¨
```http
GET /api/services
```

#### åˆ›å»ºæœåŠ¡ï¼ˆç®¡ç†å‘˜ï¼‰
```http
POST /api/services
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "æœåŠ¡åç§°",
  "description": "æœåŠ¡æè¿°",
  "category": "æœåŠ¡åˆ†ç±»",
  "basePrice": 100.00,
  "estimatedDuration": 60
}
```

### è®¢å•ç›¸å…³

#### åˆ›å»ºè®¢å•
```http
POST /api/orders
Authorization: Bearer <token>
Content-Type: application/json

{
  "service_id": "æœåŠ¡ID",
  "device_model": "è®¾å¤‡å‹å·",
  "description": "é—®é¢˜æè¿°",
  "images": ["å›¾ç‰‡URL1", "å›¾ç‰‡URL2"],
  "urgency": "normal", // normal, urgent, emergency
  "address": "è”ç³»åœ°å€",
  "contact_phone": "è”ç³»ç”µè¯"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "id": "order_uuid",
    "order_no": "XGX202501080001",
    "status": "pending",
    "created_at": "2025-01-08T10:00:00Z"
  }
}
```

#### è·å–è®¢å•åˆ—è¡¨
```http
GET /api/orders?status=pending&page=1&limit=10
Authorization: Bearer <token>
```

#### è·å–è®¢å•è¯¦æƒ…
```http
GET /api/orders/:id
Authorization: Bearer <token>
```

#### æ›´æ–°è®¢å•çŠ¶æ€
```http
PUT /api/orders/:id/status
Authorization: Bearer <token>
Content-Type: application/json

{
  "status": "assigned", // pending, assigned, in_progress, completed, cancelled
  "notes": "çŠ¶æ€æ›´æ–°å¤‡æ³¨",
  "technicianId": "æŠ€å¸ˆIDï¼ˆå¯é€‰ï¼‰"
}
```

#### å–æ¶ˆè®¢å•
```http
PUT /api/orders/:id/cancel
Authorization: Bearer <token>
Content-Type: application/json

{
  "reason": "å–æ¶ˆåŸå› "
}
```

## æ•°æ®åº“è®¾è®¡

é¡¹ç›®ä½¿ç”¨Supabaseä½œä¸ºæ•°æ®åº“æœåŠ¡ï¼ŒåŸºäºPostgreSQLã€‚ä¸»è¦æ•°æ®è¡¨ç»“æ„å¦‚ä¸‹ï¼š

### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20),
  role VARCHAR(20) DEFAULT 'user' CHECK (role IN ('user', 'technician', 'admin', 'finance')),
  avatar_url TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### æœåŠ¡é¡¹ç›®è¡¨ (services)
```sql
CREATE TABLE services (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL,
  description TEXT,
  category VARCHAR(50) NOT NULL CHECK (category IN ('screen', 'battery', 'system', 'data', 'maintenance', 'software', 'water_damage')),
  base_price DECIMAL(10,2) NOT NULL,
  estimated_duration INTEGER, -- é¢„ä¼°æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### è®¢å•è¡¨ (orders)
```sql
CREATE TABLE orders (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_no VARCHAR(50) UNIQUE NOT NULL,
  user_id UUID NOT NULL REFERENCES users(id),
  service_id UUID REFERENCES services(id),
  device_model VARCHAR(100),
  description TEXT NOT NULL,
  images JSONB DEFAULT '[]',
  urgency VARCHAR(20) DEFAULT 'normal' CHECK (urgency IN ('normal', 'urgent', 'emergency')),
  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'quoted', 'paid', 'assigned', 'processing', 'completed', 'cancelled', 'refunded')),
  quoted_price DECIMAL(10,2),
  final_price DECIMAL(10,2),
  assigned_to UUID REFERENCES users(id),
  address TEXT NOT NULL,
  contact_phone VARCHAR(20) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### è®¢å•çŠ¶æ€å†å²è¡¨ (order_status_history)
```sql
CREATE TABLE order_status_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID NOT NULL REFERENCES orders(id),
  user_id UUID NOT NULL REFERENCES users(id),
  old_status VARCHAR(20),
  new_status VARCHAR(20) NOT NULL,
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### æ”¯ä»˜è®°å½•è¡¨ (payments)
```sql
CREATE TABLE payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID NOT NULL REFERENCES orders(id),
  amount DECIMAL(10,2) NOT NULL,
  payment_method VARCHAR(50) NOT NULL,
  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'completed', 'failed', 'refunded')),
  transaction_id VARCHAR(100),
  paid_at TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### è¯„ä»·è®°å½•è¡¨ (reviews)
```sql
CREATE TABLE reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID NOT NULL REFERENCES orders(id),
  user_id UUID NOT NULL REFERENCES users(id),
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  comment TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ç´¢å¼•å’Œçº¦æŸ
```sql
-- åˆ›å»ºç´¢å¼•æé«˜æŸ¥è¯¢æ€§èƒ½
CREATE INDEX idx_orders_user_id ON orders(user_id);
CREATE INDEX idx_orders_technician_id ON orders(technician_id);
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_orders_created_at ON orders(created_at);
CREATE INDEX idx_payments_order_id ON payments(order_id);
CREATE INDEX idx_reviews_order_id ON reviews(order_id);

-- åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_services_updated_at BEFORE UPDATE ON services
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_orders_updated_at BEFORE UPDATE ON orders
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æœåŠ¡å™¨è¦æ±‚
- Node.js >= 18.0.0
- PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰
- Nginxï¼ˆåå‘ä»£ç†ï¼‰
- SSLè¯ä¹¦ï¼ˆHTTPSï¼‰

#### 2. æ„å»ºé¡¹ç›®
```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# æ„å»ºåç«¯
cd ../backend
npm run build
```

#### 3. ç¯å¢ƒå˜é‡é…ç½®
ç”Ÿäº§ç¯å¢ƒ `.env` é…ç½®ï¼š
```env
NODE_ENV=production
SUPABASE_URL=your_production_supabase_url
SUPABASE_ANON_KEY=your_production_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_production_supabase_service_role_key
JWT_SECRET=your_strong_production_jwt_secret
PORT=3001
FRONTEND_URL=https://your-domain.com
```

#### 4. PM2éƒ¨ç½²é…ç½®
åˆ›å»º `ecosystem.config.js`ï¼š
```javascript
module.exports = {
  apps: [{
    name: 'xgx-flash-fix-backend',
    script: './dist/index.js',
    cwd: './backend',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3001
    }
  }]
};
```

#### 5. Nginxé…ç½®
```nginx
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯API
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### 6. å¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨PM2å¯åŠ¨åç«¯æœåŠ¡
pm2 start ecosystem.config.js

# é‡å¯Nginx
sudo systemctl restart nginx
```

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. åˆ›å»º Dockerfile
**åç«¯ Dockerfile:**
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY dist ./dist
EXPOSE 3001
CMD ["node", "dist/index.js"]
```

**å‰ç«¯ Dockerfile:**
```dockerfile
FROM nginx:alpine
COPY dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
```

#### 2. Docker Composeé…ç½®
```yaml
version: '3.8'
services:
  backend:
    build: ./backend
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
      - JWT_SECRET=${JWT_SECRET}
    restart: unless-stopped
    
  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    restart: unless-stopped
```

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- **TypeScript**: æ‰€æœ‰ä»£ç ä½¿ç”¨TypeScriptç¼–å†™
- **ESLint**: éµå¾ªé¡¹ç›®ESLinté…ç½®
- **Prettier**: ä½¿ç”¨Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–
- **å‘½åè§„èŒƒ**:
  - ç»„ä»¶: PascalCase (å¦‚ `UserProfile`)
  - å‡½æ•°/å˜é‡: camelCase (å¦‚ `getUserInfo`)
  - å¸¸é‡: UPPER_SNAKE_CASE (å¦‚ `API_BASE_URL`)
  - æ–‡ä»¶å: kebab-case (å¦‚ `user-profile.tsx`)

### æ–‡ä»¶ç»“æ„è§„èŒƒ
```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ business/       # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hook
â”œâ”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/              # ç±»å‹å®šä¹‰
â””â”€â”€ constants/          # å¸¸é‡å®šä¹‰
```

### Gitæäº¤è§„èŒƒ
ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**ç±»å‹è¯´æ˜:**
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

**ç¤ºä¾‹:**
```
feat(auth): add user registration functionality
fix(order): resolve order status update issue
docs(readme): update installation instructions
```

### åˆ†æ”¯ç®¡ç†ç­–ç•¥
- `main` - ä¸»åˆ†æ”¯ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå—ä¿æŠ¤
- `develop` - å¼€å‘åˆ†æ”¯ï¼Œç”¨äºé›†æˆæµ‹è¯•
- `feature/*` - åŠŸèƒ½åˆ†æ”¯ï¼Œä»developåˆ†å‡º
- `hotfix/*` - çƒ­ä¿®å¤åˆ†æ”¯ï¼Œä»mainåˆ†å‡º
- `release/*` - å‘å¸ƒåˆ†æ”¯ï¼Œç”¨äºå‘å¸ƒå‡†å¤‡

### ä»£ç å®¡æŸ¥è§„èŒƒ
- æ‰€æœ‰ä»£ç å¿…é¡»ç»è¿‡Code Review
- PRå¿…é¡»é€šè¿‡CI/CDæ£€æŸ¥
- è‡³å°‘éœ€è¦ä¸€ä¸ªå®¡æŸ¥è€…æ‰¹å‡†
- ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ä¸ä½äº80%

## æµ‹è¯•ç­–ç•¥

### å‰ç«¯æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### åç«¯æµ‹è¯•
```bash
# è¿è¡ŒAPIæµ‹è¯•
npm run test:api

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration
```

## æ€§èƒ½ç›‘æ§

### å‰ç«¯æ€§èƒ½
- ä½¿ç”¨Lighthouseè¿›è¡Œæ€§èƒ½å®¡è®¡
- ç›‘æ§Core Web VitalsæŒ‡æ ‡
- ä½¿ç”¨React DevToolsåˆ†æç»„ä»¶æ€§èƒ½

### åç«¯æ€§èƒ½
- APIå“åº”æ—¶é—´ç›‘æ§
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½åˆ†æ
- å†…å­˜å’ŒCPUä½¿ç”¨ç‡ç›‘æ§

## è´¡çŒ®æŒ‡å—

1. **Forké¡¹ç›®** - ç‚¹å‡»å³ä¸Šè§’ForkæŒ‰é’®
2. **åˆ›å»ºåˆ†æ”¯** - `git checkout -b feature/amazing-feature`
3. **æäº¤ä»£ç ** - `git commit -m 'feat: add amazing feature'`
4. **æ¨é€åˆ†æ”¯** - `git push origin feature/amazing-feature`
5. **åˆ›å»ºPR** - åœ¨GitHubä¸Šåˆ›å»ºPull Request
6. **ä»£ç å®¡æŸ¥** - ç­‰å¾…ç»´æŠ¤è€…å®¡æŸ¥å’Œåé¦ˆ
7. **åˆå¹¶ä»£ç ** - å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ°ä¸»åˆ†æ”¯

### è´¡çŒ®è€…è¡Œä¸ºå‡†åˆ™
- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- æä¾›å»ºè®¾æ€§çš„åé¦ˆ
- éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
- ç¼–å†™æ¸…æ™°çš„æäº¤ä¿¡æ¯
- æ·»åŠ å¿…è¦çš„æµ‹è¯•å’Œæ–‡æ¡£

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ
A: åœ¨Supabaseæ§åˆ¶å°ä¸­é‡æ–°è¿è¡Œè¿ç§»æ–‡ä»¶ï¼Œæˆ–åˆ é™¤æ‰€æœ‰è¡¨åé‡æ–°æ‰§è¡ŒSQLè„šæœ¬ã€‚

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯APIï¼Ÿ
A: æ£€æŸ¥CORSé…ç½®å’Œç¯å¢ƒå˜é‡ä¸­çš„URLè®¾ç½®ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç”¨æˆ·è§’è‰²ï¼Ÿ
A: ä¿®æ”¹æ•°æ®åº“ä¸­usersè¡¨çš„roleå­—æ®µçº¦æŸï¼Œå¹¶æ›´æ–°ç›¸å…³çš„æƒé™æ£€æŸ¥é€»è¾‘ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è”ç³»æ–¹å¼

- **é¡¹ç›®ç»´æŠ¤è€…**: æ–°å¹²çº¿é—ªä¿®å›¢é˜Ÿ
- **æŠ€æœ¯æ”¯æŒ**: tech@xgxflashfix.com
- **å•†åŠ¡åˆä½œ**: business@xgxflashfix.com
- **é¡¹ç›®åœ°å€**: [https://github.com/your-username/XGX_Flash_Fix](https://github.com/your-username/XGX_Flash_Fix)

---

**æ„Ÿè°¢ä½¿ç”¨æ–°å¹²çº¿é—ªä¿®å¹³å°ï¼** ğŸš€

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-08)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç°åŸºç¡€çš„ç”¨æˆ·è®¤è¯åŠŸèƒ½
- å®ç°è®¢å•ç®¡ç†åŠŸèƒ½
- å®ç°æœåŠ¡é¡¹ç›®ç®¡ç†
- é›†æˆSupabaseæ•°æ®åº“
- å“åº”å¼UIè®¾è®¡